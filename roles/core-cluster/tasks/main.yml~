---

- include: install_deps.yml
- include: init.yml

- include: install_zk.yml
  when: (install_zk == True and zookeeper_path.stat.exists == False)
- include: install_storm.yml
  when: (install_storm == True and storm_path.stat.exists == False)


- include: install_cassandra.yml
  when: (install_titan == True and neo4j_path.stat.exists == False)
- include: install_neo4j.yml
  when: (install_neo4j == True and neo4j_path.stat.exists == False)

- include: install_titan.yml
  when: (install_titan == True and titan_path.stat.exists == False)

- name: Ensure ownership
  file: path={{item}} owner={{user_name}} group={{group_name}} recurse=yes
  with_items:
       - "{{cluster_home}}"
       - "{{log_home}}"

- include: install_haproxy.yml
  when: install_haproxy == True

- include: install_supervisor.yml
  when: install_supervisor == True

